<div class="card shadow-sm">

  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="m-0">Product Reviews</h5>

    <input type="text"
           class="form-control search"
           placeholder="Search by name or product..."
           (input)="searchText.set($any($event.target).value)" />
  </div>

  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
      <thead>
        <tr>
          <th>Customer</th>
          <th>Product</th>
          <th>Rating</th>
          <th class="d-none d-md-table-cell">Comment</th>
          <th>Status</th>
          <th class="d-none d-md-table-cell">Created</th>
          <th class="text-end">Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let r of paginatedReviews(); let i = index">

          <td>
            <div>{{ r.name }}</div>
            <small class="text-muted">{{ r.email }}</small>

            <!-- Mobile extra details -->
            <div class="d-md-none mt-1 mobile-extra">
              <div><strong>Product:</strong> {{ r.productName }}</div>
              <div><strong>Rating:</strong> ⭐ {{ r.rating }}/5</div>
              <div><strong>Comment:</strong> {{ r.comment }}</div>
              <div><strong>Date:</strong> {{ r.createdAt | date:'mediumDate' }}</div>
            </div>
          </td>

          <td>{{ r.productName }}</td>

          <td>⭐ {{ r.rating }}/5</td>

          <td class="comment d-none d-md-table-cell">{{ r.comment }}</td>

          <td>
            <span class="badge"
                  [ngClass]="{
                    'bg-warning': r.status === 'pending',
                    'bg-success': r.status === 'approved',
                    'bg-danger': r.status === 'rejected'
                  }">
              {{ r.status }}
            </span>
          </td>

          <td class="d-none d-md-table-cell">
            {{ r.createdAt | date:'medium' }}
          </td>

          <td class="text-end">
            <button class="btn btn-sm btn-outline-danger"
                    (click)="deleteReview(r._id)">
              <i class="bi bi-trash"></i>
            </button>
          </td>

        </tr>
      </tbody>

    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination-wrapper mt-3">

    <button class="btn btn-light"
            [disabled]="currentPage() === 1"
            (click)="changePage(currentPage() - 1)">
      Prev
    </button>

    <span class="mx-2 fw-semibold">
      {{ currentPage() }} / {{ totalPages() }}
    </span>

    <button class="btn btn-light"
            [disabled]="currentPage() === totalPages()"
            (click)="changePage(currentPage() + 1)">
      Next
    </button>

  </div>

</div>
