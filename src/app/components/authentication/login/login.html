<div class="login-wrapper">
  <div class="login-card">

    <!-- HEADER -->
    <div class="login-header">
      <h2>Admin Panel</h2>
      @if (!showForgot()) {
        <p>Sign in to continue</p>
      } @else {
        <p>Reset your password</p>
      }
    </div>

    <!-- ================= LOGIN FORM ================= -->
    @if (!showForgot()) {
      <form [formGroup]="loginForm" (ngSubmit)="login()">

        <!-- USERNAME -->
        <div class="form-group">
          <label>Username</label>
          <input
            type="text"
            formControlName="username"
            placeholder="Enter username"
            [class.invalid]="username?.invalid && username?.touched"
          />
        </div>

        <!-- PASSWORD -->
        <div class="form-group">
          <label>Password</label>
          <div class="password-box">
            <input
              [type]="showPassword() ? 'text' : 'password'"
              formControlName="password"
              placeholder="Enter password"
              [class.invalid]="password?.invalid && password?.touched"
            />
            <button
              type="button"
              class="toggle-btn"
              (click)="togglePassword()"
              aria-label="Toggle password visibility">
              {{ showPassword() ? 'üôà' : 'üëÅÔ∏è' }}
            </button>
          </div>
        </div>

        <!-- FORGOT -->
        <div class="forgot-link">
          <button type="button" (click)="goForgot()">
            Forgot password?
          </button>
        </div>

        <!-- SUBMIT -->
        <button
          class="login-btn"
          type="submit"
          [disabled]="!canLogin()">
          @if (!loading()) {
            Sign In
          } @else {
           Please wait...
          }
        </button>

        <!-- ERROR -->
        @if (error()) {
          <p class="error-text">{{ error() }}</p>
        }

        <!-- LOCK WARNING -->
        @if (locked()) {
          <p class="error-text">
            üîí Account locked after too many attempts
          </p>
        }
      </form>
    }

    <!-- ================= FORGOT PASSWORD ================= -->
    @if (showForgot()) {
      <form [formGroup]="forgotForm" (ngSubmit)="sendResetLink()">

        <div class="form-group">
          <label>Email</label>
          <input
            type="email"
            formControlName="email"
            placeholder="Enter registered email"
          />
        </div>

        <button
          class="login-btn"
          type="submit"
          [disabled]="!canReset()">
          @if (!loading()) {
            Send Reset Link
          } @else {
            <span class="loader"></span>
          }
        </button>

        <!-- SUCCESS -->
        @if (success()) {
          <p class="success-text">{{ success() }}</p>
        }

        <!-- BACK -->
        <div class="back-login">
          <button type="button" (click)="goLogin()">
            ‚Üê Back to Login
          </button>
        </div>
      </form>
    }

  </div>
</div>
